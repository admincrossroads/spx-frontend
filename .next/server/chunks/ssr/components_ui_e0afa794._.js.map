{"version":3,"sources":["../../../../components/ui/image-skeleton.tsx","../../../../components/ui/insight-image.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface ImageSkeletonProps {\r\n  className?: string;\r\n  variant?: 'default' | 'pulse' | 'wave';\r\n}\r\n\r\nexport function ImageSkeleton({ className, variant = 'pulse' }: ImageSkeletonProps) {\r\n  const baseClasses = 'bg-muted animate-pulse';\r\n  \r\n  if (variant === 'wave') {\r\n    return (\r\n      <div className={cn('relative overflow-hidden', className)}>\r\n        <div className=\"absolute inset-0 bg-muted\" />\r\n        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-muted-foreground/10 to-transparent animate-shimmer\" />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className={cn(baseClasses, className)} />\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { ImageSkeleton } from './image-skeleton';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface InsightImageProps {\r\n  src: string;\r\n  alt: string;\r\n  className?: string;\r\n  loading?: 'lazy' | 'eager';\r\n}\r\n\r\nexport function InsightImage({ src, alt, className = '', loading = 'lazy' }: InsightImageProps) {\r\n  const [imgSrc, setImgSrc] = useState(src);\r\n  const [hasError, setHasError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    setHasError(false);\r\n    setImgSrc(src);\r\n  }, [src]);\r\n\r\n  const handleLoad = () => {\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleError = () => {\r\n    setIsLoading(false);\r\n    if (!hasError) {\r\n      // Try without crossOrigin\r\n      setHasError(true);\r\n      setImgSrc(src);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {isLoading && (\r\n        <ImageSkeleton className={cn('absolute inset-0', className)} />\r\n      )}\r\n      {!hasError && (\r\n        <img\r\n          src={imgSrc}\r\n          alt={alt}\r\n          className={cn(\r\n            'transition-opacity duration-300',\r\n            isLoading ? 'opacity-0' : 'opacity-100',\r\n            className\r\n          )}\r\n          loading={loading}\r\n          crossOrigin={hasError ? undefined : 'anonymous'}\r\n          referrerPolicy=\"no-referrer\"\r\n          onLoad={handleLoad}\r\n          onError={handleError}\r\n        />\r\n      )}\r\n      {hasError && (\r\n        <div className={cn('bg-muted flex items-center justify-center', className)}>\r\n          <span className=\"text-muted-foreground text-sm\">Failed to load image</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OAOO,SAAS,EAAc,WAAE,CAAS,SAAE,EAAU,OAAO,CAAsB,QAGhF,AAAgB,QAAQ,CAApB,EAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,2BAA4B,aAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iHAMnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,AAZD,yBAYc,IAEpC,uECtBA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OASO,SAAS,EAAa,KAAE,CAAG,KAAE,CAAG,WAAE,EAAY,EAAE,SAAE,EAAU,MAAM,CAAqB,EAC5F,GAAM,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAC/B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,SAE3C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAa,GACb,GAAY,GACZ,EAAU,EACZ,EAAG,CAAC,EAAI,EAgBN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,mBAAoB,KAElD,CAAC,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EACL,IAAK,EACL,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,kCACA,EAAY,YAAc,cAC1B,GAEF,QAAS,EACT,YAAa,OAAW,EAAY,YACpC,eAAe,cACf,OA9BW,CA8BH,IA7Bd,GAAa,EACf,EA6BQ,QA3BY,CA2BH,IA1Bf,GAAa,GACR,IAEH,GAAY,GAFC,AAGb,EAAU,GAEd,IAuBK,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,4CAA6C,YAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,6BAK1D"}