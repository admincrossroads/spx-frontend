{"version":3,"sources":["../../../../components/ui/image-skeleton.tsx","../../../../components/ui/insight-image.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface ImageSkeletonProps {\r\n  className?: string;\r\n  variant?: 'default' | 'pulse' | 'wave';\r\n}\r\n\r\nexport function ImageSkeleton({ className, variant = 'pulse' }: ImageSkeletonProps) {\r\n  const baseClasses = 'bg-muted animate-pulse';\r\n  \r\n  if (variant === 'wave') {\r\n    return (\r\n      <div className={cn('relative overflow-hidden', className)}>\r\n        <div className=\"absolute inset-0 bg-muted\" />\r\n        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-muted-foreground/10 to-transparent animate-shimmer\" />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className={cn(baseClasses, className)} />\r\n  );\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { ImageSkeleton } from './image-skeleton';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface InsightImageProps {\r\n  src: string;\r\n  alt: string;\r\n  className?: string;\r\n  loading?: 'lazy' | 'eager';\r\n}\r\n\r\nexport function InsightImage({ src, alt, className = '', loading = 'lazy' }: InsightImageProps) {\r\n  const [hasError, setHasError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isImageLoaded, setIsImageLoaded] = useState(false);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n\r\n  useEffect(() => {\r\n    // Reset state when src changes\r\n    setIsLoading(true);\r\n    setHasError(false);\r\n    setIsImageLoaded(false);\r\n\r\n    // Check if image is already loaded (cached)\r\n    if (imgRef.current?.complete && imgRef.current?.naturalHeight !== 0) {\r\n      setIsLoading(false);\r\n      setIsImageLoaded(true);\r\n    }\r\n  }, [src]);\r\n\r\n  const handleLoad = () => {\r\n    setIsLoading(false);\r\n    setIsImageLoaded(true);\r\n  };\r\n\r\n  const handleError = () => {\r\n    setIsLoading(false);\r\n    setHasError(true);\r\n  };\r\n\r\n  // If no src, show placeholder\r\n  if (!src) {\r\n    return (\r\n      <div className={cn('bg-muted flex items-center justify-center', className)}>\r\n        <span className=\"text-muted-foreground text-sm\">No image</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={cn('relative overflow-hidden', className)}>\r\n      {isLoading && !hasError && (\r\n        <ImageSkeleton className=\"absolute inset-0 z-10\" />\r\n      )}\r\n      {!hasError && (\r\n        <img\r\n          ref={imgRef}\r\n          src={src}\r\n          alt={alt}\r\n          className={cn(\r\n            'w-full h-full object-cover transition-opacity duration-300',\r\n            isImageLoaded ? 'opacity-100' : 'opacity-0'\r\n          )}\r\n          loading={loading}\r\n          onLoad={handleLoad}\r\n          onError={handleError}\r\n        />\r\n      )}\r\n      {hasError && (\r\n        <div className={cn('bg-muted flex items-center justify-center h-full', className)}>\r\n          <span className=\"text-muted-foreground text-sm\">Failed to load image</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OAOO,SAAS,EAAc,WAAE,CAAS,SAAE,EAAU,OAAO,CAAsB,QAGhF,AAAgB,QAAQ,CAApB,EAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,2BAA4B,aAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iHAMnB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,AAZD,yBAYc,IAEpC,uECtBA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OASO,SAAS,EAAa,KAAE,CAAG,KAAE,CAAG,WAAE,EAAY,EAAE,SAAE,EAAU,MAAM,CAAqB,EAC5F,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7C,EAAS,CAAA,EAAA,EAAA,MAAA,AAAM,EAAmB,aAExC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAER,GAAa,GACb,GAAY,GACZ,GAAiB,GAGb,EAAO,OAAO,EAAE,UAAY,EAAO,OAAO,EAAE,gBAAkB,GAAG,CACnE,GAAa,GACb,GAAiB,GAErB,EAAG,CAAC,EAAI,EAaH,GASH,CAAA,CATQ,CASR,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EAAG,2BAA4B,aAC5C,GAAa,CAAC,GACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,0BAE1B,CAAC,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EACL,IAAK,EACL,IAAK,EACL,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,6DACA,EAAgB,cAAgB,aAElC,QAAS,EACT,OAlCW,CAkCH,IAjCd,GAAa,GACb,GAAiB,EACnB,EAgCQ,QA9BY,CA8BH,IA7Bf,GAAa,GACb,EAAY,GACd,IA8BK,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,mDAAoD,YACrE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,8BA3BpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,4CAA6C,YAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,cA+BxD"}