module.exports=[85860,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(15618),h=a.i(33350),i=a.i(87532),j=a.i(13749),k=a.i(50522),l=a.i(88237),m=a.i(54161),n=a.i(76504),o=a.i(24569),p=a.i(79360),q=a.i(81560),r=a.i(33441),s=a.i(33508),t=a.i(41675);let u=(0,a.i(70106).default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var v=a.i(5094),w=a.i(92e3),x=a.i(62477);function y({open:a,onOpenChange:d,tag:f,onSuccess:g}){let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)("");async function l(){if(f)try{i(!0),k(""),await x.api.delete(`/admin/tags/${f.id}`),g?.(),d(!1)}catch(a){k(a?.data?.message||a?.message||"Failed to delete tag")}finally{i(!1)}}return(0,b.jsx)(v.AlertDialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(v.AlertDialogContent,{children:[(0,b.jsxs)(v.AlertDialogHeader,{children:[(0,b.jsxs)(v.AlertDialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Trash2,{className:"h-5 w-5 text-destructive"}),"Delete Tag"]}),(0,b.jsxs)(v.AlertDialogDescription,{children:["Are you sure you want to delete the tag ",(0,b.jsx)("strong",{children:f?.name}),"? This action cannot be undone. Insights using this tag will keep it, but you won't be able to assign it to new insights."]})]}),j&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 text-destructive text-sm rounded",children:[(0,b.jsx)(w.AlertCircle,{className:"h-4 w-4"}),j]}),(0,b.jsxs)(v.AlertDialogFooter,{children:[(0,b.jsx)(v.AlertDialogCancel,{disabled:h,children:"Cancel"}),(0,b.jsx)(e.Button,{variant:"destructive",onClick:l,disabled:h,children:h?"Deleting...":"Delete Tag"})]})]})})}var z=a.i(56872);function A({tags:a,onSuccess:d}){let[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)({name:"",slug:""}),[k,v]=(0,c.useState)(!1),[w,A]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null);function E(a){h(a.id),j({name:a.name,slug:a.slug})}function F(){h(null),j({name:"",slug:""})}async function G(a){if(!i.name.trim()||!i.slug.trim())return void F();try{v(!0),await x.api.patch(`/admin/tags/${a}`,{name:i.name,slug:i.slug}),h(null),d?d():window.location.reload()}catch(a){alert(a?.data?.message||a?.message||"Failed to update tag")}finally{v(!1)}}return 0===a.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(B,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"No tags found"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Get started by creating your first tag."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,b.jsxs)(l.Table,{children:[(0,b.jsx)(l.TableHeader,{children:(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableHead,{children:"Name"}),(0,b.jsx)(l.TableHead,{children:"Slug"}),(0,b.jsx)(l.TableHead,{children:"Created"}),(0,b.jsx)(l.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(l.TableBody,{children:a.map(a=>(0,b.jsxs)(l.TableRow,{children:[(0,b.jsx)(l.TableCell,{className:"font-medium",children:g===a.id?(0,b.jsx)(f.Input,{value:i.name,onChange:a=>j(b=>({...b,name:a.target.value})),disabled:k,className:"w-full"}):(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(m.Badge,{variant:"outline",children:a.name})})}),(0,b.jsx)(l.TableCell,{children:g===a.id?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(f.Input,{value:i.slug,onChange:a=>{let b;return b=a.target.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),void j(a=>({...a,slug:b}))},disabled:k,className:"w-full"})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(u,{className:"h-3 w-3"}),a.slug]})}),(0,b.jsx)(l.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(t.Calendar,{className:"h-3 w-3"}),(0,z.formatDate)(a.createdAt)]})}),(0,b.jsx)(l.TableCell,{className:"text-right",children:g===a.id?(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",onClick:F,disabled:k,children:(0,b.jsx)(s.X,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",onClick:()=>G(a.id),disabled:k,children:(0,b.jsx)(r.Check,{className:"h-4 w-4"})})]}):(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",onClick:()=>E(a),children:(0,b.jsx)(o.Edit,{className:"h-4 w-4"})}),(0,b.jsxs)(n.DropdownMenu,{children:[(0,b.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(p.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(n.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(n.DropdownMenuLabel,{children:"Actions"}),(0,b.jsx)(n.DropdownMenuSeparator,{}),(0,b.jsxs)(n.DropdownMenuItem,{onClick:()=>E(a),children:[(0,b.jsx)(o.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,b.jsxs)(n.DropdownMenuItem,{className:"text-destructive",onClick:()=>{D(a),A(!0)},children:[(0,b.jsx)(q.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},a.id))})]})}),(0,b.jsx)(y,{open:w,onOpenChange:A,tag:C,onSuccess:()=>{d?d():window.location.reload()}})]})}function B(a){return(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:[(0,b.jsx)("path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"}),(0,b.jsx)("path",{d:"M7 7h.01"})]})}var C=a.i(95245),D=a.i(59501),E=a.i(56757),F=a.i(65733),G=a.i(58213);let H=E.z.object({name:E.z.string().min(1,"Name is required").max(50,"Name is too long"),slug:E.z.string().min(1,"Slug is required").max(50,"Slug is too long").regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Slug can only contain lowercase letters, numbers, and hyphens")});function I({children:a,onSuccess:d}){let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),n=(0,C.useForm)({resolver:(0,D.zodResolver)(H),defaultValues:{name:"",slug:""}});function o(a){return a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}async function p(a){try{k(!0),m(""),await x.api.post("/admin/tags",a),n.reset(),i(!1),d?d():window.location.reload()}catch(a){m(a?.data?.message||a?.message||"Failed to create tag")}finally{k(!1)}}return(0,b.jsxs)(F.Dialog,{open:h,onOpenChange:i,children:[(0,b.jsx)(F.DialogTrigger,{asChild:!0,children:a}),(0,b.jsxs)(F.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(F.DialogHeader,{children:[(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Plus,{className:"h-5 w-5"}),"Create New Tag"]}),(0,b.jsx)(F.DialogDescription,{children:"Add a new tag for categorizing insights."})]}),(0,b.jsx)(G.Form,{...n,children:(0,b.jsxs)("form",{onSubmit:n.handleSubmit(p),className:"space-y-4",children:[l&&(0,b.jsx)("div",{className:"p-3 bg-destructive/10 text-destructive text-sm rounded",children:l}),(0,b.jsx)(G.FormField,{control:n.control,name:"name",render:({field:a})=>(0,b.jsxs)(G.FormItem,{children:[(0,b.jsx)(G.FormLabel,{children:"Name *"}),(0,b.jsx)(G.FormControl,{children:(0,b.jsx)(f.Input,{placeholder:"Market Analysis",...a,onChange:b=>{var c;let d,e;a.onChange(b),c=b.target.value,n.setValue("name",c),d=n.getValues("slug"),e=o(c),d&&d!==o(n.formState.defaultValues?.name||"")||n.setValue("slug",e)},disabled:j})}),(0,b.jsx)(G.FormMessage,{})]})}),(0,b.jsx)(G.FormField,{control:n.control,name:"slug",render:({field:a})=>(0,b.jsxs)(G.FormItem,{children:[(0,b.jsxs)(G.FormLabel,{className:"flex items-center gap-2",children:[(0,b.jsx)(u,{className:"h-3 w-3"}),"Slug *"]}),(0,b.jsx)(G.FormControl,{children:(0,b.jsx)(f.Input,{placeholder:"market-analysis",...a,disabled:j})}),(0,b.jsx)(G.FormDescription,{children:"URL-friendly version of the name"}),(0,b.jsx)(G.FormMessage,{})]})}),(0,b.jsxs)(F.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:j,children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",disabled:j,children:j?"Creating...":"Create Tag"})]})]})})]})]})}var J=a.i(50944);function K(){let a=(0,J.useRouter)(),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(1),[t,u]=(0,c.useState)(1),[v,w]=(0,c.useState)(0);(0,c.useEffect)(()=>{},[]);let y=(0,c.useCallback)(async()=>{o(!0);try{let a=new URLSearchParams;a.set("page",r.toString()),a.set("limit","10"),p&&a.set("search",p);let b=await x.api.get(`/admin/tags?${a.toString()}`),c=b.data||b,d=c.pagination?.total||0,e=c.tags||c,f=d>0?Math.ceil(d/10):0;if(w(d),u(f),m(Array.isArray(e)?e:[]),r>f&&f>0)return void s(f)}catch(a){m([])}finally{o(!1)}},[r,p,a]);return(0,c.useEffect)(()=>{y()},[r,y]),(0,c.useEffect)(()=>{let a=setTimeout(()=>{""!==p&&s(1),y()},500);return()=>clearTimeout(a)},[p,y]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Tags"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage tags for categorizing insights"})]}),(0,b.jsx)(I,{onSuccess:y,children:(0,b.jsxs)(e.Button,{children:[(0,b.jsx)(g.Plus,{className:"mr-2 h-4 w-4"}),"Add Tag"]})})]}),(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,b.jsx)(f.Input,{placeholder:"Search tags...",value:p,onChange:a=>q(a.target.value),className:"pl-10",onKeyDown:a=>{"Enter"===a.key&&(s(1),y())}})]})})})}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Tag,{className:"h-5 w-5"}),"All Tags"]})}),(0,b.jsx)(d.CardContent,{children:n?(0,b.jsx)("div",{className:"text-center py-12",children:"Loading tags..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A,{tags:l,onSuccess:y}),!n&&t>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-6 border-t",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(r-1)*10+1," to"," ",Math.min(10*r,v)," of ",v," tags"]}),t>1&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>{r>1&&s(r-1)},disabled:1===r,children:[(0,b.jsx)(j.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:t},(a,c)=>{let d=c+1;return(0,b.jsx)(e.Button,{variant:r===d?"default":"outline",size:"sm",className:"w-8 h-8 p-0",onClick:()=>{s(d)},children:d},d)})}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>{r<t&&s(r+1)},disabled:r>=t,children:["Next",(0,b.jsx)(k.ChevronRight,{className:"h-4 w-4 ml-1"})]})]})]})]})})]})]})}a.s(["default",()=>K],85860)}];

//# sourceMappingURL=app_admin_%28dashboard%29_tags_page_tsx_4997331b._.js.map