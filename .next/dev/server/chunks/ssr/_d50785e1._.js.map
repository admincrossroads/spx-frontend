{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Victus/Documents/Spiralytix/Website/spiralytix-site/lib/actions/tags.ts"],"sourcesContent":["'use server';\r\n\r\nimport { cookies } from 'next/headers';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL;\r\nconst API_KEY = process.env.NEXT_PUBLIC_API_KEY;\r\n\r\nasync function fetchWithAuth(endpoint: string, options: RequestInit = {}) {\r\n  const cookieStore = await cookies();\r\n  const token = cookieStore.get('token')?.value;\r\n\r\n  if (!token) {\r\n    throw new Error('No authentication token provided');\r\n  }\r\n\r\n  const headers = new Headers(options.headers);\r\n  headers.set('x-api-key', API_KEY!);\r\n  headers.set('Cookie', `token=${token}`);\r\n\r\n  if (!(options.body instanceof FormData)) {\r\n    headers.set('Content-Type', 'application/json');\r\n  }\r\n\r\n  const response = await fetch(`${API_URL}${endpoint}`, {\r\n    ...options,\r\n    headers,\r\n    credentials: 'include',\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(errorData.message || `HTTP ${response.status}`);\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nexport async function getTags() {\r\n  try {\r\n    return await fetchWithAuth('/admin/tags', {\r\n      cache: 'no-store',\r\n    });\r\n  } catch (error) {\r\n    console.error('Failed to fetch tags:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getTagById(id: number) {\r\n  try {\r\n    return await fetchWithAuth(`/admin/tags/${id}`, {\r\n      cache: 'no-store',\r\n    });\r\n  } catch (error) {\r\n    console.error(`Failed to fetch tag ${id}:`, error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function createTag(data: { name: string; slug: string }) {\r\n  return await fetchWithAuth('/admin/tags', {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n  });\r\n}\r\n\r\nexport async function updateTag(id: number, data: { name?: string; slug?: string }) {\r\n  return await fetchWithAuth(`/admin/tags/${id}`, {\r\n    method: 'PATCH',\r\n    body: JSON.stringify(data),\r\n  });\r\n}\r\n\r\nexport async function deleteTag(id: number) {\r\n  return await fetchWithAuth(`/admin/tags/${id}`, {\r\n    method: 'DELETE',\r\n  });\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;;;;AAEA,MAAM;AACN,MAAM;AAEN,eAAe,cAAc,QAAgB,EAAE,UAAuB,CAAC,CAAC;IACtE,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,UAAU;IAExC,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,IAAI,QAAQ,QAAQ,OAAO;IAC3C,QAAQ,GAAG,CAAC,aAAa;IACzB,QAAQ,GAAG,CAAC,UAAU,CAAC,MAAM,EAAE,OAAO;IAEtC,IAAI,CAAC,CAAC,QAAQ,IAAI,YAAY,QAAQ,GAAG;QACvC,QAAQ,GAAG,CAAC,gBAAgB;IAC9B;IAEA,MAAM,WAAW,MAAM,MAAM,GAAG,UAAU,UAAU,EAAE;QACpD,GAAG,OAAO;QACV;QACA,aAAa;IACf;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACvD,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI,CAAC,KAAK,EAAE,SAAS,MAAM,EAAE;IAChE;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,IAAI;QACF,OAAO,MAAM,cAAc,eAAe;YACxC,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,EAAE;IACX;AACF;AAEO,eAAe,WAAW,EAAU;IACzC,IAAI;QACF,OAAO,MAAM,cAAc,CAAC,YAAY,EAAE,IAAI,EAAE;YAC9C,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,oBAAoB,EAAE,GAAG,CAAC,CAAC,EAAE;QAC5C,MAAM;IACR;AACF;AAEO,eAAe,UAAU,IAAoC;IAClE,OAAO,MAAM,cAAc,eAAe;QACxC,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAEO,eAAe,UAAU,EAAU,EAAE,IAAsC;IAChF,OAAO,MAAM,cAAc,CAAC,YAAY,EAAE,IAAI,EAAE;QAC9C,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAEO,eAAe,UAAU,EAAU;IACxC,OAAO,MAAM,cAAc,CAAC,YAAY,EAAE,IAAI,EAAE;QAC9C,QAAQ;IACV;AACF;;;IAxCsB;IAWA;IAWA;IAOA;IAOA;;AApCA,+OAAA;AAWA,+OAAA;AAWA,+OAAA;AAOA,+OAAA;AAOA,+OAAA"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Victus/Documents/Spiralytix/Website/spiralytix-site/.next-internal/server/app/admin/%28dashboard%29/tags/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {updateTag as '60fd9dc6a2d16ee632bfb408c21a1d386f749d0c1a'} from 'ACTIONS_MODULE0'\nexport {createTag as '408a3b161645a3a96d145d3cdbbff6c72e241a1ff8'} from 'ACTIONS_MODULE0'\nexport {deleteTag as '401223a6431f211c086ac953f86a7fab5394b31697'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}