(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let i=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...a}));i.displayName="Card";let r=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));r.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let n=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>i,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>r,"CardTitle",()=>l])},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},60023,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(70065),i=e.i(15760),r=e.i(75254);let l=(0,r.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var d=e.i(78583),n=e.i(61911),c=e.i(51975),o=e.i(87316);let m=(0,r.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);function h(e){let t=new Date(e),a=Math.floor(Math.floor((new Date().getTime()-t.getTime())/1e3)/60),s=Math.floor(a/60),i=Math.floor(s/24);return i>0?`${i} ${1===i?"day":"days"} ago`:s>0?`${s} ${1===s?"hour":"hours"} ago`:a>0?`${a} ${1===a?"minute":"minutes"} ago`:"Just now"}function x(){let[e,r]=(0,a.useState)(0),[x,u]=(0,a.useState)(0),[f,g]=(0,a.useState)(0),[p,j]=(0,a.useState)(0),[y,N]=(0,a.useState)([]),[b,v]=(0,a.useState)(!0);(0,a.useEffect)(()=>{!async function(){try{let[e,t,a]=await Promise.all([i.api.get("/admin/insights?limit=50").catch(()=>({insights:[],pagination:{total:0}})),i.api.get("/admin/authors").catch(()=>[]),i.api.get("/admin/tags").catch(()=>[])]),s=e?.insights||(Array.isArray(e)?e:[]);if(s.length>0){r(e.pagination?.total||s.length),u(s.filter(e=>e.isPublished).length);let t=[];s.forEach(e=>{if(e.isPublished&&e.publishedAt&&t.push({action:"Published",title:e.title,time:h(e.publishedAt),timestamp:new Date(e.publishedAt).getTime()}),e.updatedAt){let a=new Date(e.updatedAt).getTime(),s=e.publishedAt?new Date(e.publishedAt).getTime():0;(!e.publishedAt||a-s>6e4)&&t.push({action:"Updated",title:e.title,time:h(e.updatedAt),timestamp:a})}}),t.sort((e,t)=>t.timestamp-e.timestamp),N(t.slice(0,5).map(({timestamp:e,...t})=>t))}g(Array.isArray(t)?t.length:0),j(Array.isArray(a)?a.length:0)}catch(e){if(console.error("Failed to fetch dashboard stats:",e),e?.status===401){localStorage.removeItem("token"),window.location.href="/admin/login";return}}finally{v(!1)}}()},[]);let w=[{label:"Total Insights",value:e.toString(),icon:d.FileText,change:"—"},{label:"Published",value:x.toString(),icon:l,change:"—"},{label:"Authors",value:f.toString(),icon:n.Users,change:"—"},{label:"Tags",value:p.toString(),icon:c.Tag,change:"—"}];return b?(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading dashboard..."})]})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Welcome back, Admin!"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(o.Calendar,{className:"h-4 w-4"}),new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:w.map(e=>(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:e.label}),(0,t.jsx)(e.icon,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.value}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground flex items-center",children:[(0,t.jsx)(m,{className:"mr-1 h-3 w-3"}),e.change," from last month"]})]})]},e.label))}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:"Recent Activity"})}),(0,t.jsx)(s.CardContent,{children:y.length>0?(0,t.jsx)("div",{className:"space-y-4",children:y.map((e,a)=>(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.action," • ",e.time]})]})},`${e.title}-${a}`))}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No recent activity to display"})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:"Quick Actions"})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("a",{href:"/admin/insights/new",className:"flex flex-col items-center justify-center rounded-lg border p-4 hover:bg-accent transition-colors",children:[(0,t.jsx)(d.FileText,{className:"h-6 w-6 mb-2"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"New Insight"})]}),(0,t.jsxs)("a",{href:"/admin/authors/new",className:"flex flex-col items-center justify-center rounded-lg border p-4 hover:bg-accent transition-colors",children:[(0,t.jsx)(n.Users,{className:"h-6 w-6 mb-2"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Add Author"})]}),(0,t.jsxs)("a",{href:"/admin/tags",className:"flex flex-col items-center justify-center rounded-lg border p-4 hover:bg-accent transition-colors",children:[(0,t.jsx)(c.Tag,{className:"h-6 w-6 mb-2"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Manage Tags"})]}),(0,t.jsxs)("a",{href:"/admin/insights",className:"flex flex-col items-center justify-center rounded-lg border p-4 hover:bg-accent transition-colors",children:[(0,t.jsx)(l,{className:"h-6 w-6 mb-2"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"View All"})]})]})})]})]})]})}e.s(["default",()=>x],60023)}]);