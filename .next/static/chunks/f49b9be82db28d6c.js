(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4579,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,variant:s="pulse"}){return"wave"===s?(0,t.jsxs)("div",{className:(0,a.cn)("relative overflow-hidden",e),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-muted"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-muted-foreground/10 to-transparent animate-shimmer"})]}):(0,t.jsx)("div",{className:(0,a.cn)("bg-muted animate-pulse",e)})}e.s(["ImageSkeleton",()=>s])},49686,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(22016),r=e.i(94179),i=e.i(70065),n=e.i(67881),l=e.i(88674),o=e.i(78583),d=e.i(87316),c=e.i(84614),u=e.i(31278),m=e.i(72520),h=e.i(82559),g=e.i(15760);let f={blog:"Blog",report:"Report",publication:"Publication","policy-brief":"Policy Brief"},p={blog:"bg-blue-500",report:"bg-green-500",publication:"bg-purple-500","policy-brief":"bg-orange-500"};function x({type:e,initialInsights:x=[],initialTotal:y=0}){let[v,b]=(0,a.useState)(x.slice(0,6)),[j,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(y>6),[C,S]=(0,a.useState)(1),[A,I]=(0,a.useState)(y),T=(0,a.useCallback)(async()=>{if(!j&&w){N(!0);try{let t=new URLSearchParams;t.set("isPublished","true"),e&&t.set("type",e);let a=v.length,s=Math.floor(a/3)+1;t.set("page",s.toString()),t.set("limit","3");let r=await g.api.get(`/insights?${t.toString()}`),i=r.insights||[],n=r.pagination?.total||A;if(i.length>0){let e=[...v,...i];b(e),I(n),k(e.length<n),S(s)}else k(!1)}catch(e){console.error("Failed to load more insights:",e),k(!1)}finally{N(!1)}}},[j,w,v,e,A]);return((0,a.useEffect)(()=>{k(v.length<A)},[v.length,A]),0===v.length)?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(o.FileText,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:e?`No ${f[e]||e}s found.`:"No insights found."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:v.map(e=>(0,t.jsx)(s.default,{href:`/insights/${e.slug}`,target:"_blank",rel:"noopener noreferrer",children:(0,t.jsxs)(i.Card,{className:"h-full hover:shadow-lg transition-shadow cursor-pointer",children:[e.coverImageUrl&&(0,t.jsx)("div",{className:"relative h-48 w-full overflow-hidden rounded-t-lg",children:(0,t.jsx)(h.InsightImage,{src:(0,l.getImageUrl)(e.coverImageUrl),alt:e.title,className:"w-full h-full object-cover",loading:"lazy"})}),(0,t.jsxs)(i.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(r.Badge,{className:`${p[e.type]||"bg-gray-500"} text-white capitalize px-4 py-1.5 text-sm transform-[translateY(-15px)]`,children:f[e.type]||e.type}),e.publishedAt&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(d.Calendar,{className:"h-3 w-3"}),(0,l.formatDate)(e.publishedAt)]})]}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2 line-clamp-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-4",children:e.summary}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(c.User,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.author.name})]}),e.tags.length>0&&(0,t.jsx)("div",{className:"flex gap-1",children:e.tags.slice(0,2).map(e=>(0,t.jsx)(r.Badge,{variant:"outline",className:"text-sm px-3 py-1",children:e.name},e.id))})]}),(0,t.jsx)("div",{className:"flex justify-end mt-auto",children:(0,t.jsxs)(n.Button,{variant:"ghost",size:"sm",className:"gap-2 hover:underline text-primary hover:text-primary hover:bg-transparent p-0 h-auto",children:["Read More ",(0,t.jsx)(m.ArrowRight,{className:"h-4 w-4"})]})})]})]})},e.id))}),w&&(0,t.jsx)("div",{className:"flex justify-center mt-8",children:(0,t.jsx)(n.Button,{onClick:T,disabled:j,variant:"outline",size:"lg",children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):"Load More"})})]})}e.s(["InsightsGrid",()=>x])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},70065,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...a}));r.displayName="Card";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",e),...a}));n.displayName="CardTitle";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));l.displayName="CardDescription";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));o.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>o,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},15760,e=>{"use strict";class t extends Error{status;data;constructor(e,t,a){super(e),this.status=t,this.data=a,this.name="ApiError"}}let a=new class{async request(e,a={}){let s=`http://localhost:5000/api/v1${e}`,r=new Headers(a.headers);r.set("x-api-key","spx-1234567890abcdef");{let t=localStorage.getItem("token");t?(r.set("Authorization",`Bearer ${t}`),console.log("[API Client] Adding Authorization header with token length:",t.length)):console.warn("[API Client] No token found in localStorage for endpoint:",e)}a.body instanceof FormData||r.set("Content-Type","application/json");let i={...a,headers:r,credentials:"omit"};try{let a=await fetch(s,i);if(!a.ok){let i;if(401===a.status){let t=localStorage.getItem("token");console.error("[API Client] 401 Unauthorized:",{endpoint:e,url:s,hasToken:!!t,tokenLength:t?.length||0,hasAuthHeader:r.has("Authorization"),authHeaderValue:r.get("Authorization")?.substring(0,30)+"...",allHeaders:Object.fromEntries(r.entries())}),localStorage.removeItem("token"),window.location.pathname.includes("/admin/login")||(window.location.href="/admin/login")}try{i=await a.json()}catch{i=await a.text()}throw new t(i?.message||`HTTP ${a.status}`,a.status,i)}if(204===a.status)return{};return await a.json()}catch(e){if(e instanceof t)throw e;throw new t("Network error",0,e)}}async get(e,t){return this.request(e,{method:"GET",...t})}async post(e,t,a){let s=t instanceof FormData?t:JSON.stringify(t);return this.request(e,{method:"POST",body:s,...a})}async patch(e,t,a){let s=t instanceof FormData?t:JSON.stringify(t);return this.request(e,{method:"PATCH",body:s,...a})}async delete(e,t){return this.request(e,{method:"DELETE",...t})}};e.s(["api",0,a])},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},94179,e=>{"use strict";var t=e.i(43476),a=e.i(54406),s=e.i(47163);let r=(0,a.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:a,...i}){return(0,t.jsx)("div",{className:(0,s.cn)(r({variant:a}),e),...i})}e.s(["Badge",()=>i])},82559,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(4579),r=e.i(47163);function i({src:e,alt:i,className:n="",loading:l="lazy"}){let[o,d]=(0,a.useState)(e),[c,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{h(!0),u(!1),d(e)},[e]),(0,t.jsxs)("div",{className:"relative",children:[m&&(0,t.jsx)(s.ImageSkeleton,{className:(0,r.cn)("absolute inset-0",n)}),!c&&(0,t.jsx)("img",{src:o,alt:i,className:(0,r.cn)("transition-opacity duration-300",m?"opacity-0":"opacity-100",n),loading:l,crossOrigin:c?void 0:"anonymous",referrerPolicy:"no-referrer",onLoad:()=>{h(!1)},onError:()=>{h(!1),c||(u(!0),d(e))}}),c&&(0,t.jsx)("div",{className:(0,r.cn)("bg-muted flex items-center justify-center",n),children:(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:"Failed to load image"})})]})}e.s(["InsightImage",()=>i])}]);